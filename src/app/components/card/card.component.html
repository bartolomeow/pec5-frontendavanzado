<div class="container mt-5">
  <button class="btn" mat-raised-button color="accent" routerLink="/">
    Back
  </button>
  <div
    *ngIf="card"
    class="row animate__animated animate__bounce animate__fadeIn"
  >
    <mat-card>
      <mat-card-header>
        <mat-card-title>{{ card.name }}</mat-card-title>
      </mat-card-header>
      <img mat-card-image src="{{ card.images.large }}" alt="{{ card.name }}" />
      <mat-card-actions>
        <button mat-raised-button color="primary" (click)="toggleAccordion()">
          Show all details
        </button>
      </mat-card-actions>
      <div *ngIf="accordionVisibleState">
        <mat-card-content>
          <mat-accordion>
            <mat-expansion-panel
              (opened)="panelOpenState = true"
              (closed)="panelOpenState = false"
            >
              <mat-expansion-panel-header>
                <mat-panel-title>Basic info</mat-panel-title>
              </mat-expansion-panel-header>
              <!--Card info-->
              <p><strong>Id: </strong>{{ card.id }}</p>
              <p><strong>Number: </strong>{{ card.number }}</p>
              <p>
                <strong>Subtypes: </strong
                ><span *ngFor="let subtype of card.subtypes">{{
                  subtype
                }}</span>
              </p>
              <p><strong>HP: </strong>{{ card.hp }}</p>
              <p>
                <strong>Types: </strong
                ><span *ngFor="let type of card.types">{{ type }}</span>
              </p>
              <p><strong>Evolves from: </strong>{{ card.evolvesFrom }}</p>
              <p>
                <strong>Retreat cost: </strong
                ><span *ngFor="let retreatcost of card.retreatCost"
                  ><p>{{ retreatcost }}</p></span
                >
              </p>
              <p><strong>Artist: </strong>{{ card.artist }}</p>
            </mat-expansion-panel>

            <mat-expansion-panel
              (opened)="panelOpenState = true"
              (closed)="panelOpenState = false"
            >
              <mat-expansion-panel-header>
                <mat-panel-title>Set info</mat-panel-title>
              </mat-expansion-panel-header>
              <!--Set info-->
              <p><strong>Set id: </strong>{{ card.set.id }}</p>
              <p><strong>Set name: </strong>{{ card.set.name }}</p>
              <p><strong>Series: </strong>{{ card.set.series }}</p>
              <p><strong>Printed: </strong>{{ card.set.printedTotal }}</p>
              <p><strong>Release date: </strong>{{ card.set.releaseDate }}</p>
            </mat-expansion-panel>

            <mat-expansion-panel
              (opened)="panelOpenState = true"
              (closed)="panelOpenState = false"
            >
              <mat-expansion-panel-header>
                <mat-panel-title>Price info</mat-panel-title>
              </mat-expansion-panel-header>
              <!--Price info-->
              <p><strong>Rarity: </strong>{{ card.rarity }}</p>
              <p>
                <strong>Price at Card Market (normal) </strong
                >{{ card.cardmarket.prices.averageSellPrice }}€
              </p>
              <p>
                <strong>Price at TCGPlater (foil) </strong
                >{{ card.cardmarket.prices.reverseHoloSell }}€
              </p>
            </mat-expansion-panel>
          </mat-accordion>
        </mat-card-content>
      </div>
    </mat-card>
  </div>
</div>
